function timeDifference(e){var t=(new Date).getTime(),n=6e4,o=60*n,a=24*o,s=30*a,i=365*a,l=t-1e3*e;return l<n?Math.round(l/1e3)+" seconds ago":l<o?Math.round(l/n)+" minutes ago":l<a?Math.round(l/o)+" hours ago":l<s?"~ "+Math.round(l/a)+" days ago":l<i?"~ "+Math.round(l/s)+" months ago":"~ "+Math.round(l/i)+" years ago"}function monthName(e){var t=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return t[e]}function setThemeDark(){document.body.classList.remove("body-theme-override-light"),document.body.classList.add("body-theme-override-dark"),localStorage.setItem("theme","dark")}function setThemeLight(){document.body.classList.remove("body-theme-override-dark"),document.body.classList.add("body-theme-override-light"),localStorage.setItem("theme","light")}function setMenuTriggers(){document.querySelectorAll(".menuTrigger").forEach(function(e){e.addEventListener("click",function(e){cpre=1,setTimeout(function(){cpre=0},1e3),e.currentTarget.classList.contains("open")?e.currentTarget.classList.remove("open"):e.currentTarget.classList.add("open")})}),document.querySelectorAll(".menu").forEach(function(e){e.addEventListener("click",function(e){e.currentTarget.parentNode.querySelectorAll(".menuTrigger")[0].classList.remove("open")})}),document.querySelectorAll(".btn-connect").forEach(function(e){e.addEventListener("click",onConnect)})}async function UIWorkingInit(e){e=!e||isNaN(e)?100:e,document.getElementById("loader").style.display="",document.getElementById("app").style.filter="blur(5px)",setTimeout(function(){document.getElementById("loader")&&(document.getElementById("loader").style.display="none"),document.getElementById("app")&&(document.getElementById("app").style.filter="blur(0px)")},e)}function fetchApplicationData(e){fetching=!0;var t=new XMLHttpRequest;t.open("GET","src/data/sample.json",!0),t.send(),t.onload=function(){if(200===t.status&&t.responseText.length>0){var e=JSON.parse(t.responseText);window.poolPayload=e,fetching=!1,makeHomePage(),wHist(),document.getElementById("app").classList.remove("-loading"),loadActivityFlag=!1}else permanentlyStop=!0,document.getElementById("app").classList.remove("-loading");t.onprogress=function(e){},t.onerror=function(){permanentlyStop=!0,window.notify("Failed fetching application data. Try reloading the page. If the error persists, try clearing the browser cache.","bad","Dismiss")}}}function makeChart(){if(window.poolPayload&&window.selectedPool)var e=window.poolPayload.tokens,t=window.selectedPool;else if(!window.poolPayload||!window.selectedPool)return;var n=document.getElementById("graph");if(n.style.display="none",n){var o,a=document.getElementById("graphParent");n.innerHTML="",o=a.getBoundingClientRect().height>=.3*window.outerHeight&&window.outerWidth<=750?.3*window.outerHeight:500;var s=a.getBoundingClientRect().width,l=LightweightCharts.createChart(n,{width:s,height:o,priceScale:{borderVisible:!1},timeScale:{borderVisible:!1},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},layout:{backgroundColor:"#ffffff00",textColor:"#6702FF",fontSize:14,fontFamily:"Montserrat"}});l.applyOptions({handleScroll:!1,handleScale:!1});var r=l.addAreaSeries({topColor:"#6702FF",bottomColor:"#6702FF00",lineColor:"#6702FF",lineWidth:2});chartData=Array();Date.now();var d=Math.round((new Date).getTime()/1e3);switch(window.graphFilter){case"7day":if(e[t]["7d-average"][0].time||isNaN(e[t]["7d-average"][0]))chartData=e[t]["24hr-average"];else for(i=0;i<e[t]["7d-average"].length;i++){var c=8640*(i+1),m=d-c,u=Number(e[t]["7d-average"][e[t]["7d-average"].length-(i+1)]);chartData.push({time:m,value:u})}break;case"24hr":default:if(e[t]["24hr-average"][0].time||isNaN(e[t]["24hr-average"][0]))chartData=e[t]["24hr-average"];else for(i=0;i<e[t]["24hr-average"].length;i++){var p=3600*(i+1);m=d-p,u=Number(e[t]["24hr-average"][e[t]["24hr-average"].length-(i+1)]);chartData.push({time:m,value:u})}}if(r.setData(chartData),l.timeScale().fitContent(),n.style.display="",window.dollarToERC20=e[t].value,document.querySelectorAll(".floating-tooltip-2").length<1){var g=document.createElement("div");g.className="floating-tooltip-2",a.append(g)}g=document.querySelectorAll(".floating-tooltip-2")[0];g.innerHTML=`<div class="badge"><img class="token-icon-mini" src="src/img/symbols/${e[t].icon}"><div>1 ${t} : USD</div></div>\n      <div style="font-size: 24px;padding: 0.5rem;">$${e[t]["24hr-average"][e[t]["24hr-average"].length-1].toFixed(2)}</div>\n      <div style="font-size: 11px;font-family: 'Montserrat';opacity: .5;">${new Date}</div>`,document.getElementById("explorePool")&&(document.getElementById("explorePool").querySelectorAll("span")[0].innerHTML=`${t}`),l.subscribeCrosshairMove(function(o){if(void 0===o.point||!o.time||o.point.x<0||o.point.x>n.clientWidth||o.point.y<0||o.point.y>n.clientHeight)var a=e[t]["24hr-average"][e[t]["24hr-average"].length-1],s=new Date;else s=new Date(1e3*o.time),a=o.seriesPrices.get(r);g.innerHTML=`<div class="badge"><img class="token-icon-mini" src="src/img/symbols/${e[t].icon}"><div>1 ${t} : USD</div></div>\n      <div style="font-size: 24px;padding: 0.5rem;">$${a.toFixed(2)}</div>\n      <div style="font-size: 11px;font-family: 'Montserrat';opacity: .5;">${s}</div>`})}document.getElementById("currentReceive")&&(document.getElementById("currentReceive").innerHTML=`<span><img style="height:1.5rem" src="src/img/symbols/${e[t].icon}">&nbsp;${t}</span>`),document.getElementById("poolHeader")&&(document.getElementById("poolHeader").innerHTML=`<img style="height:2rem" src="src/img/symbols/${e[t].icon}">&nbsp;${t} Pool`),saniExc()}function makeHomePage(){var e=window.poolPayload;document.getElementById("poolList").innerHTML="";var t=0;Object.keys(e.tokens).forEach(function(n){var o=document.createElement("tr");if(window.selectedPool||(window.selectedPool=n,makeChart(),o.classList.add("selected")),o.style["animation-delay"]=`${t/10}s`,t++,e.tokens[n]){var a=e.tokens[n],s=Number(a["24hr-change-percent"])>0?'<i class="fas fa-arrow-up"></i>':Number(a["24hr-change-percent"])<0?'<i class="fas fa-arrow-down"></i>':"",i=Number(a["24hr-change-percent"])>0?"good":Number(a["24hr-change-percent"])<0?"bad":"";o.innerHTML=`<td><div class="badge">\n      <img class="token-icon-mini" src="src/img/symbols/${a.icon}"><span>${n}</span>\n      <span class="mobile-only l-imp-txt">${a.name}</span>\n      </div></td>\n        <td class="desktop-only">${a.name}</td>\n        <td>$${a.value}<span class="mobile-only"><span class="${i}">${s}${a["24hr-change-percent"]}%</span></span></td>\n        <td class="desktop-only"><span class="${i}">${s}${a["24hr-change-percent"]}%</span></td>\n        <td class="desktop-only">$${a.volume}</td>\n        <td class="desktop-only" style="padding:0"><a style="padding:1rem" onclick="window.location='#explore=${n}'"><i class="fas fa-caret-right"></i></a></td>`,o.setAttribute("onclick",`selectPool(this, '${n}')`),document.getElementById("poolList").append(o)}})}function selectPool(e,t){window.selectedPool=t,document.getElementById("poolList").querySelectorAll(".selected").forEach(function(e){e.classList.remove("selected")}),e.classList.add("selected"),makeChart()}function saniExc(){document.getElementById("dollarInput").value=200,window.dollarToERC20&&(document.getElementById("tokenInput").value=Number(200*window.dollarToERC20).toFixed(2))}function changeSender(e,t){e.parentNode.classList.remove("open"),document.querySelectorAll(".currentSend").forEach(function(e){e.innerHTML=`<span><img style="height:1.5rem" src="src/img/symbols/${t}.png">&nbsp;${t}&nbsp;<i class="fas fa-caret-down"></i></span>`})}function explorePool(e){e&&(window.selectedPool=e),window.location=`#explore=${window.selectedPool}`}function stakingManager(e){if(e||(window.location="#stake"),window.poolPayload){if(document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"),document.getElementById("stakingManager")&&document.getElementById("stakingManager").classList.add("build-in"),window.currentStakingPool&&window.poolPayload.user.portfolio[window.currentStakingPool]){var t=`\n        <h3>Account balance: <span><img style="height:1.5rem" src="src/img/icon.png">&nbsp;BigWave Token</span></h3>\n    <p>${formatCurrency.format(window.poolPayload.user.balance)} BGW-T</p>\n    `,n=`\n    <h2>Balance <span><img style="height:1.5rem" src="src/img/symbols/${window.poolPayload.tokens[window.currentStakingPool].icon}">&nbsp;${window.poolPayload.tokens[window.currentStakingPool].name}</span></h2>\n    <p>${formatCurrency.format(window.poolPayload.user.portfolio[window.currentStakingPool].balance)} BGW-T</p>\n    `;document.getElementById("stakeActions").style.display="block"}else n=`\n    <h3>Account balance: <span><img style="height:1.5rem" src="src/img/icon.png">&nbsp;BigWave Token</span></h3>\n    <p>${formatCurrency.format(window.poolPayload.user.balance)} BGW-T</p>\n    `,t="";document.querySelectorAll(".balance-organiser").forEach(function(e){e.classList.contains("prominent")?e.innerHTML=n:t.length<1?e.style.display="none":(e.style.display="",e.innerHTML=t)}),document.getElementById("poolList2").innerHTML="";var o=0;Object.keys(window.poolPayload.tokens).forEach(function(e){var t=document.createElement("tr");if(t.style["animation-delay"]=`${o/10}s`,o++,window.currentStakingPool&&window.currentStakingPool===e&&t.classList.add("selected"),window.poolPayload.tokens[e]&&window.poolPayload.tokens[e].staking){var n=window.poolPayload.tokens[e];t.innerHTML=`<td><div class="badge">\n          <img class="token-icon-mini" src="src/img/symbols/${n.icon}"><span>${e}</span>\n          <span class="mobile-only l-imp-txt">${n.name}</span>\n          </div></td>\n            <td>${n.staking.end}</td>\n            <td>${formatCurrency.format(n.staking.volume)} ${e}</td>\n            <td>${formatCurrency.format(n.staking.rate)} BGW-T/day</td>\n            <td>${formatCurrency.format(n.staking.balance)} BGW-T</td>\n            <td><a href="https://etherscan.io/address/${n.staking.tx}">${n.staking.tx.substring(0,4)}...${n.staking.tx.substring(n.staking.tx.length-4)}<i class="fas fa-external-link-alt"></i></a></td>`,t.setAttribute("onclick",`selectStakingPool(this, "${e}")`),document.getElementById("poolList2").append(t)}})}}function selectStakingPool(e,t){if(!t)return!1;window.currentStakingPool=t,document.getElementById("poolList2").querySelectorAll(".selected").forEach(function(e){e.classList.remove("selected")}),stakingManager()}function stakeCurrent(){!window.walletConnected&&window.notify("Link a wallet to the app to begin staking tokens.","bad","dismiss")}function governanceInspector(e){e||(window.location="#governance"),window.poolPayload&&document.getElementById("governanceInspector")&&(document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"),document.getElementById("governanceInspector").classList.add("build-in"),document.getElementById("governanceInspector").querySelectorAll(".balance-organiser")[0].innerHTML=`<h3>Account balance: <span><img style="height:1.5rem" src="src/img/icon.png">&nbsp;BigWave Token</span></h3>\n    <p>${formatCurrency.format(window.poolPayload.user.balance)} BGW-T</p>`,window.poolPayload.governance.statistics.active&&(document.getElementById("activeGauge").style.transform=`translateX(${window.poolPayload.governance.statistics.active.pc}%)`,document.getElementById("activeVal").innerHTML=` ${formatCurrency.format(window.poolPayload.governance.statistics.active.value)} BWV-T`),window.poolPayload.governance.statistics.inactive&&(document.getElementById("inactiveGauge").style.transform=`translateX(${window.poolPayload.governance.statistics.inactive.pc}%)`,document.getElementById("inactiveVal").innerHTML=` ${formatCurrency.format(window.poolPayload.governance.statistics.inactive.value)} BWV-T`),window.poolPayload.governance.statistics.delegated&&(document.getElementById("delegatedGauge").style.transform=`translateX(${window.poolPayload.governance.statistics.delegated.pc}%)`,document.getElementById("delegatedVal").innerHTML=` ${formatCurrency.format(window.poolPayload.governance.statistics.delegated.value)} BWV-T`),window.poolPayload.governance.proposals&&(g=window.poolPayload.governance.proposals,tbody="",_g=0,g.forEach(function(e){if(document.getElementById("poolList3")){var t="open"!==e.status?"View":"Vote";tbody+=`<tr style="animation-delay:${_g/10}s">\n            <td><div class="status-badge"><span>${e.status}</span></div></td>\n            <td>${e.name}<br><a>0x • ${e.id}&nbsp;<i class="fas fa-info-circle"></i></a></td>\n            <td>${formatInt.format(e.for)} BGW-T<br>\n            <span class="bar-gauge for"><span style="transform: translateX(${e.for/(e.for+e.against)*100}%);"></span></span>\n            </td>\n            <td>${formatInt.format(e.against)} BGW-T<br>\n            <span class="bar-gauge against"><span style="transform: translateX(${e.against/(e.for+e.against)*100}%);"></span></span>\n            </td>\n            <td><a href="#inspect-proposal=${e.id}">${t}&nbsp;<i class="fas fa-check-circle"></i></a></td>\n            </tr>`,_g++}}),document.getElementById("poolList3")&&(document.getElementById("poolList3").innerHTML=`${tbody}`)))}function inspectProposal(e){if(!e)return!1;if(e=Number(e),window.poolPayload&&window.poolPayload.governance.proposals&&document.getElementById("proposalInspector")){document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"),document.getElementById("proposalInspector").classList.add("build-in");var t=!1;if(window.poolPayload.governance.proposals.forEach(function(n){n.id&&n.id===e&&(t=n)}),t.votes&&document.getElementById("proposalVotes")&&t.votes.forEach(function(e){var t=document.createElement("div");t.classList.add("asset-organiser"),t.innerHTML=`<p><span class="status-badge">${e.type}</span>&nbsp;&nbsp;&nbsp;<b>${formatCurrency.format(e.value)}</b> &nbsp;<a href="https://etherscan.io/address/${e.tx}">${e.tx.substring(0,4)}...${e.tx.substring(e.tx.length-4)}<i class="fas fa-external-link-alt"></i></a></p>\n        `,document.getElementById("proposalVotes").append(t)}),t&&document.getElementById("proposalSummary")){var n="",o=t;n+=`<h2>${o.name} (${o.id})<br><br><div class="status-badge"><span>${o.status}</span></div></h2>\n\n      <div class="stack-inset">\n      <div><div class="status-badge"><span>for</span></div>${formatInt.format(o.for)} BGW-T<br>\n      <span class="bar-gauge for"><span style="transform: translateX(${o.for/(o.for+o.against)*100}%);"></span></span>\n      </div>\n      <div><div class="status-badge"><span>against</span></div>${formatInt.format(o.against)} BGW-T<br>\n      <span class="bar-gauge against"><span style="transform: translateX(${o.against/(o.for+o.against)*100}%);"></span></span>\n      </div>\n      </div>\n\n      <div>\n      <p>${o["info-text"]}</p>\n      </div>\n      `,document.getElementById("proposalSummary").innerHTML=n}}}function openPageElement(){document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")});var e=1;document.getElementById("explorePage")&&(document.getElementById("explorePage").classList.add("build-in"),window.poolPayload&&window.selectedPool&&(window.poolPayload.tokens[window.selectedPool].assets&&(assets=window.poolPayload.tokens[window.selectedPool].assets,document.getElementById("assetsDisplay")&&(document.getElementById("assetsDisplay").innerHTML=""),Object.keys(assets).forEach(function(t){if(document.getElementById("assetsDisplay")){var n=document.createElement("div");n.classList.add("asset-organiser"),n.style["animation-delay"]=`${e/10}s`,e++,n.innerHTML=`<img style="height:2.5rem" src="src/img/symbols/${assets[t].icon}">&nbsp;\n            <div class="txt">\n            <h2>${t}</h2>\n            <p>${formatCurrency.format(assets[t].amount)} ${t} = ${formatDollar.format(assets[t].value)}\n            <br>Provides ${assets[t].pc}% of ${window.selectedPool} Pool liquidity.</p>\n            </div><span class="bar-gauge"><span style="transform:translateX(${assets[t].pc}%);background-color:${assets[t].colour}"></span></span>`,document.getElementById("assetsDisplay").append(n)}})),window.poolPayload.tokens[window.selectedPool].trades&&(trades=window.poolPayload.tokens[window.selectedPool].trades,tbody="",_b=0,trades.forEach(function(e){if(document.getElementById("assetsDisplay")){var t=window.poolPayload.tokens[window.selectedPool].value,n=e.time,o=new Date(1e3*n);o=`${o.getFullYear()} ${monthName(o.getMonth())} ${o.getDate()} ${o.getHours()}.${o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes()}`;var a=e.input?`${e.input} ${e.currency}`:`${Number(e.output)*t} ${window.selectedPool}`,s=e.type,i=e.output?`${e.output} ${e.currency}`:`${Number(e.input)/t} ${window.selectedPool}`,l=e.tx,r=`${l.substring(0,4)}...${l.substring(l.length-4)}`;tbody+=`<tr class="tr-${s}" style="animation-delay:${_b/10}s">\n            <td><div class="date-approx"><span>${o}</span><small>${timeDifference(n)}</small></div></td>\n            <td>${a}</td>\n            <td><span class="desktop-only ${s}">${s}</span></td>\n            <td>${i}</td>\n            <td><a href="${l}">${r}&nbsp;<i class="fas fa-external-link-alt"></i></a></td>\n            </tr>`,_b++}}),document.getElementById("tradesDisplay")&&(document.getElementById("tradesDisplay").innerHTML=`<table class="table">\n        <thead class="desktop-only">\n          <tr class="">\n            <th class="" scope="col">Time</th>\n            <th class="" scope="col">Input</th>\n            <th class="" scope="col">Type</th>\n            <th class="" scope="col">Output</th>\n            <th class="" scope="col">Transaction</th>\n          </tr>\n        </thead>\n        <tbody>\n        ${tbody}\n        </tbody>\n      </table>`)),window.poolPayload.tokens[window.selectedPool].swaps&&(swaps=window.poolPayload.tokens[window.selectedPool].swaps,tbody="",_c=0,swaps.forEach(function(e){if(document.getElementById("assetsDisplay")){var t=window.poolPayload.tokens[window.selectedPool].value,n=e.time,o=new Date(1e3*n);o=`${o.getFullYear()} ${monthName(o.getMonth())} ${o.getDate()} ${o.getHours()}.${o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes()}`;var a=e.input?`${e.input} ${e.currency}`:`${Number(e.output)*t} ${window.selectedPool}`,s=e.output?`${e.output} ${e.currency}`:`${Number(e.input)/t} ${window.selectedPool}`,i=e.tx,l=`${i.substring(0,4)}...${i.substring(i.length-4)}`;tbody+=`<tr style="animation-delay:${_c/10}s">\n            <td><div class="date-approx"><span>${o}</span><small>${timeDifference(n)}</small></div></td>\n            <td>${a}</td>\n            <td>${s}</td>\n            <td><a href="${i}">${l}&nbsp;<i class="fas fa-external-link-alt"></i></a></td>\n            </tr>`,_c++}}),document.getElementById("swapsDisplay")&&(document.getElementById("swapsDisplay").innerHTML=`<table class="table">\n        <thead class="desktop-only">\n          <tr class="">\n            <th class="" scope="col">Time</th>\n            <th class="" scope="col">Input</th>\n            <th class="" scope="col">Output</th>\n            <th class="" scope="col">Transaction</th>\n          </tr>\n        </thead>\n        <tbody>\n        ${tbody}\n        </tbody>\n      </table>`)),document.getElementById("infoDisplay")&&(tok=window.poolPayload.tokens[window.selectedPool],address=`${tok.address.substring(0,4)}...${tok.address.substring(tok.address.length-4)}`,document.getElementById("infoDisplay").innerHTML=`<ul style="list-style:none">\n        <li>Volume: ${formatCurrency.format(tok.volume)} ${window.selectedPool}</li>\n        <li>Value: ${formatDollar.format(tok.volume*tok.value)}</li>\n        <li>Supply: ${formatCurrency.format(tok.supply)} ${window.selectedPool}</li>\n        <li>Address: ${address}</li>\n        </ul>`)),document.getElementById("appMain")&&document.getElementById("appMain").classList.add("build-out"))}function closePageElement(e){document.getElementById(e)?document.getElementById(e).classList.remove("build-in"):document.querySelectorAll(".data-explorer").forEach(function(e){e.classList.remove("build-in")}),document.getElementById("appMain")&&document.getElementById("appMain").classList.remove("build-out")}function wHist(){if(String(window.location.href).indexOf("#")>-1){var e=window.location.hash.split("#")[1].split("&"),t=e[0].split("="),n=String(e[0]).indexOf("=")>-1?e[0].split("=")[0]:e[0];if(n){switch(n){case"home":closePageElement();break;case"explore":window.selectedPool=t[1]&&window.poolPayload.tokens[t[1]]?t[1]:window.selectedPool?window.selectedPool:"error",openPageElement();break;case"stake":stakingManager(!0);break;case"governance":governanceInspector(!0);break;case"inspect-proposal":inspectProposal(t[1]);break;default:closePageElement()}}}else closePageElement()}const formatDollar=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),formatCurrency=new Intl.NumberFormat("en-GB",{minimumFractionDigits:2}),formatInt=new Intl.NumberFormat("en-GB");var theme,cpre,loadActivityFlag,permanentlyStop,fetching,wh,ww,chartData;switch(window.notify=function(e,t,n,o){var a=document.createElement("div");a.classList.add("notification");var s=document.createElement("div");s.classList.add("notification-payload"),t&&isNaN(t)&&t.length>2?a.classList.add(t):n=t;var i=document.createElement("i");switch(i.classList.add("fas"),t){case"bad":i.classList.add("fa-times");break;case"good":i.classList.add("fa-check");break;case"warn":i.classList.add("fa-exclamation");break;default:i.classList.add("fa-info")}s.append(i);var l=document.createElement("span");if(l.innerHTML=e,s.append(l),t&&!n||!t&&!n||n&&isNaN(n)&&n.length>0){var r=document.createElement("button");r.setAttribute("onclick",`window.destroyNotification(this);${o}`),r.innerHTML=n||"dismiss",s.append(r)}else(n||!t||isNaN(t))&&isNaN(n)||(n=n<0?-1*n:n,n=n<100?1e3*n:n<1e3?1e3:n,setTimeout(function(){document.querySelectorAll(".notification").forEach(function(e){e.remove()})},n));a.append(s),document.body.append(a)},window.destroyNotification=function(e){e.parentNode.parentNode.remove()},!theme||theme.length<1?localStorage.getItem("theme")||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,localStorage.setItem("theme","dark")):localStorage.setItem("theme",theme),theme=localStorage.getItem("theme"),theme){case"auto":window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setThemeDark():setThemeLight();break;case"dark":setThemeDark();break;case"light":setThemeLight();break;default:setThemeLight()}document.querySelectorAll(".menuTrigger").length>0&&setMenuTriggers(),Date.now||(Date.now=(()=>(new Date).getTime())),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),fetchApplicationData(),wh=window.innerHeight,ww=window.innerWidth,window.onresize=function(){wh=window.innerHeight,ww=window.innerWidth,window.selectedPool&&window.poolPayload&&makeChart()},window.refreshTimeElapsed=0,setInterval(function(){window.refreshTimeElapsed++},6e5),window.onfocus=function(){window.refreshTimeElapsed>=1&&(document.getElementById("loader").style.display="",document.getElementById("app").style.filter="blur(5px)",!fetching&&fetchApplicationData(),UIWorkingInit(2e3),window.refreshTimeElapsed=0)},document.getElementById("dollarInput")&&(document.getElementById("dollarInput").addEventListener("input",function(e){if(window.dollarToERC20&&!isNaN(this.value)){var t=this.value*window.dollarToERC20;document.getElementById("tokenInput").value=Number(t).toFixed(2)}else this.value=200}),document.getElementById("tokenInput").addEventListener("input",function(e){if(window.dollarToERC20&&!isNaN(this.value)){var t=this.value*window.dollarToERC20;document.getElementById("dollarInput").value=t}else this.value=0}),saniExc());var availableTokens=["eth","usdt","usdc","dai","chi","bgw-t"];if(document.getElementById("receiveDenom")&&document.getElementById("sendDenom")&&availableTokens.length>2&&document.querySelectorAll(".currentSend").length>0){var receive=document.getElementById("receiveDenom"),send=document.getElementById("sendDenom");document.querySelectorAll(".selection-drawer").forEach(function(e){availableTokens.forEach(function(t){var n=document.createElement("span");n.setAttribute("onclick",`changeSender(this, '${t}')`),n.classList.add("sel"),n.innerHTML=`<span><img style="height:1.5rem" src="src/img/symbols/${t}.png">&nbsp;${t}</span>`,e.append(n)})}),document.querySelectorAll(".selection-drawer").forEach(function(e){e.addEventListener("mouseleave",function(e){e.currentTarget.classList.remove("open")})}),window.selling=availableTokens[0],document.querySelectorAll(".currentSend").forEach(function(e){e.innerHTML=`<span><img style="height:1.5rem" src="src/img/symbols/${availableTokens[0]}.png">&nbsp;${availableTokens[0]}&nbsp;<i class="fas fa-caret-down"></i></span>`}),document.querySelectorAll(".currentSend").forEach(function(e){e.addEventListener("click",function(e){document.querySelectorAll(".selection-drawer").forEach(function(e){e.classList.remove("open")}),e.currentTarget.parentNode.querySelectorAll(".selection-drawer")[0].classList.contains("open")?e.currentTarget.parentNode.querySelectorAll(".selection-drawer")[0].classList.remove("open"):e.currentTarget.parentNode.querySelectorAll(".selection-drawer")[0].classList.add("open")})})}document.querySelectorAll(".option-switch").forEach(function(e){Array.prototype.slice.call(e.children).forEach(function(e){e.addEventListener("click",function(e){Array.prototype.slice.call(e.currentTarget.parentNode.children).forEach(function(e){e.classList.remove("selected")}),e.currentTarget.classList.add("selected")})})}),Array.prototype.slice.call(document.getElementById("graphControls").children).forEach(function(e){e.addEventListener("click",function(e){window.graphFilter=e.currentTarget.getAttribute("filter"),makeChart()})}),UIWorkingInit(),document.getElementById("explorePool")&&(document.getElementById("explorePool").addEventListener("click",function(){explorePool()}),Array.prototype.slice.call(document.getElementById("exploreTabsControls").children).forEach(function(e){e.addEventListener("click",function(e){var t=!!e.currentTarget.hasAttribute("filter")&&e.currentTarget.getAttribute("filter");document.getElementById("explorePayloads").querySelectorAll("div").forEach(function(e){e.hasAttribute("filter")&&(e.getAttribute("filter")==t?e.style.display="flex":e.style.display="none")})})})),document.getElementById("homeTrigger")&&document.getElementById("homeTrigger").addEventListener("click",function(e){window.location="#home"}),window.addEventListener("popstate",function(e){wHist()});